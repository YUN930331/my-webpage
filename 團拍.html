<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NCUT ç•¢æ¥­åœ˜æ‹å ±åç³»çµ±</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap');
    body {
      font-family: 'Noto Sans TC', sans-serif;
      margin: 0;
      background: #f0f4f8;
      color: #333;
    }
    header {
      background: #6EC1E4;
      padding: 1rem;
      text-align: center;
      color: white;
      font-size: 1.5rem;
      font-weight: 700;
    }
    .container {
      max-width: 600px;
      margin: 2rem auto;
      background: white;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: 600;
    }
    select, input {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.5rem;
      border: 1.5px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s;
      box-sizing: border-box;
    }
    select:focus, input:focus {
      border-color: #6EC1E4;
      outline: none;
    }
    button {
      margin-top: 1.5rem;
      padding: 0.75rem 1rem;
      background: #6EC1E4;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button:hover {
      background: #4aabd0;
    }
    .preview {
      background: #f9f9f9;
      padding: 1rem 1.5rem;
      margin-top: 1.5rem;
      border: 2px solid #6EC1E4;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(110,193,228,0.3);
    }
    .preview table {
      width: 100%;
      border-collapse: collapse;
      font-size: 1rem;
    }
    .preview th, .preview td {
      padding: 0.5rem 0.75rem;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }
    .preview th {
      width: 35%;
      color: #4a90e2;
      font-weight: 700;
    }
    .preview td {
      color: #333;
    }
    .preview-buttons {
      margin-top: 1rem;
      text-align: right;
    }
    .preview-buttons button {
      margin-left: 0.8rem;
      padding: 0.5rem 1rem;
      font-size: 1rem;
    }
    .hidden {
      display: none;
    }
    /* ç°¡å–®ç½®ä¸­é¦–é æŒ‰éˆ• */
    #homeButtons {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-width: 300px;
      margin: 2rem auto 0;
    }
  </style>
</head>
<body>
  <header>NCUT ç•¢æ¥­åœ˜æ‹å ±åç³»çµ±</header>

  <!-- é¦–é  -->
  <div class="container" id="homePage">
    <div id="homeButtons">
      <button id="btnToForm">ğŸ“ æˆ‘è¦å¡«å¯«å ±å</button>
      <button id="btnToQuery">ğŸ” æŸ¥è©¢ï¼ä¿®æ”¹è³‡æ–™</button>
      <button id="btnToLogin">ğŸ”‘ ç™»å…¥å¾Œå°</button>
    </div>
  </div>

  <!-- å ±åé  -->
  <div class="container hidden" id="formPage">
    <button id="btnFormBack">â† è¿”å›é¦–é </button>

    <label>å­¸åˆ¶</label>
    <select id="edu" onchange="updateDepartments()">
      <option value="">è«‹é¸æ“‡å­¸åˆ¶</option>
      <option value="æ—¥å››æŠ€">æ—¥å››æŠ€</option>
      <option value="ç¢©å£«">ç¢©å£«</option>
    </select>

    <label>ç§‘ç³»</label>
    <select id="dept">
      <option value="">è«‹å…ˆé¸æ“‡å­¸åˆ¶</option>
    </select>

    <label>å¹´ç´š</label>
    <select id="grade">
      <option value="">è«‹é¸æ“‡</option>
      <option value="ä¸‰">ä¸‰</option>
      <option value="å››">å››</option>
    </select>

    <label>ç­åˆ¥</label>
    <select id="class">
      <option value="">è«‹é¸æ“‡</option>
      <option value="ç”²">ç”²</option>
      <option value="ä¹™">ä¹™</option>
      <option value="ä¸™">ä¸™</option>
      <option value="ä¸">ä¸</option>
    </select>

    <label>å®Œæ•´ç­ç´š</label>
    <input id="fullClass" readonly placeholder="å°‡è‡ªå‹•çµ„åˆå®Œæ•´ç­ç´š" />

    <label>å­¸è™Ÿ</label>
    <input id="sid" placeholder="è«‹è¼¸å…¥å­¸è™Ÿ" />

    <label>å§“å</label>
    <input id="name" placeholder="è«‹è¼¸å…¥å§“å" />

    <label>é›»è©±ï¼ˆ09 é–‹é ­ï¼‰</label>
    <input id="phone" placeholder="è«‹è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼" />

    <label>Email</label>
    <input id="email" type="email" placeholder="è«‹è¼¸å…¥é›»å­éƒµä»¶" />

    <label>æ‹æ”äººæ•¸</label>
    <input id="people" type="number" min="1" placeholder="è«‹è¼¸å…¥æ‹æ”äººæ•¸" />

    <label>å­¸å£«æœä»¶æ•¸</label>
    <input id="gown" type="number" min="0" placeholder="è«‹è¼¸å…¥å­¸å£«æœä»¶æ•¸" />

    <label>å¡«å¯«æ—¥æœŸ</label>
    <input id="date" type="date" />

    <label>ç¸½é‡‘é¡ (æ¯äºº 200 å…ƒ)</label>
    <input id="total" readonly placeholder="å°‡è‡ªå‹•è¨ˆç®—" />

    <button id="btnPreview">ğŸ” é è¦½ä¸¦ç¢ºèª</button>

    <div class="preview hidden" id="preview">
      <table>
        <tbody id="previewTableBody"></tbody>
      </table>
      <div class="preview-buttons">
        <button id="btnSubmit">âœ… ç¢ºèªé€å‡º</button>
        <button id="btnBack">âœï¸ è¿”å›ä¿®æ”¹</button>
      </div>
    </div>
  </div>

  <!-- æŸ¥è©¢ä¿®æ”¹é  -->
  <div class="container hidden" id="queryPage">
    <button id="btnQueryBack">â† è¿”å›é¦–é </button>
    <p>æŸ¥è©¢ï¼ä¿®æ”¹åŠŸèƒ½å¾…å¯¦ä½œ...</p>
  </div>

  <!-- ç™»å…¥é  -->
  <div class="container hidden" id="loginPage">
    <button id="btnLoginBack">â† è¿”å›é¦–é </button>

    <label>å¸³è™Ÿ</label>
    <input type="text" id="loginAccount" placeholder="è«‹è¼¸å…¥å¸³è™Ÿ" />

    <label>å¯†ç¢¼</label>
    <input type="password" id="loginPassword" placeholder="è«‹è¼¸å…¥å¯†ç¢¼" />

    <button id="btnLoginSubmit">ç™»å…¥</button>
  </div>

  <script>
    // é é¢åˆ‡æ›å‡½å¼
    function showPage(pageId) {
      ['homePage', 'formPage', 'queryPage', 'loginPage'].forEach(id => {
        document.getElementById(id).classList.add('hidden');
      });
      document.getElementById(pageId).classList.remove('hidden');
    }

    // Dept Data
    const deptData = {
      "æ—¥å››æŠ€": [
        "åŒ–å·¥èˆ‡ææ–™å·¥ç¨‹ç³»(æ‰€)",
        "æ©Ÿæ¢°å·¥ç¨‹ç³»(æ‰€)",
        "å†·å‡ç©ºèª¿èˆ‡èƒ½æºç³»(æ‰€)",
        "æ™ºæ…§è‡ªå‹•åŒ–å·¥ç¨‹ç³»é›»è³‡å­¸é™¢",
        "é›»æ©Ÿå·¥ç¨‹ç³»(æ‰€)",
        "é›»å­å·¥ç¨‹ç³»(æ‰€)",
        "è³‡è¨Šå·¥ç¨‹ç³»(æ‰€)",
        "äººå·¥æ™ºæ…§æ‡‰ç”¨å·¥ç¨‹ç³»",
        "æ–‡åŒ–å‰µæ„äº‹æ¥­ç³»(æ‰€)",
        "æ™¯è§€ç³»(æ‰€)",
        "æ‡‰ç”¨è‹±èªç³»",
        "å·¥æ¥­å·¥ç¨‹èˆ‡ç®¡ç†ç³»(æ‰€)",
        "ä¼æ¥­ç®¡ç†ç³»(æ‰€)",
        "è³‡è¨Šç®¡ç†ç³»(æ‰€)",
        "æµé€šç®¡ç†ç³»(æ‰€)",
        "å¥åº·ç”¢æ¥­ç§‘æŠ€ç ”ç™¼èˆ‡ç®¡ç†ç³»(æ‰€)"
      ],
      "ç¢©å£«": ["è«‹è¯ç¹«å„ç³»ç¢ºèª"]
    };

    // DOM Elements
    const edu = document.getElementById('edu');
    const dept = document.getElementById('dept');
    const grade = document.getElementById('grade');
    const classSel = document.getElementById('class');
    const fullClass = document.getElementById('fullClass');
    const sid = document.getElementById('sid');
    const nameInput = document.getElementById('name');
    const phone = document.getElementById('phone');
    const email = document.getElementById('email');
    const people = document.getElementById('people');
    const gown = document.getElementById('gown');
    const date = document.getElementById('date');
    const total = document.getElementById('total');

    const preview = document.getElementById('preview');
    const previewTableBody = document.getElementById('previewTableBody');

    // æ›´æ–°ç§‘ç³»é¸å–®
    function updateDepartments() {
      const selectedEdu = edu.value;
      dept.innerHTML = '';
      if (!selectedEdu || !deptData[selectedEdu]) {
        dept.innerHTML = '<option value="">è«‹å…ˆé¸æ“‡å­¸åˆ¶</option>';
        return;
      }
      dept.innerHTML = '<option value="">è«‹é¸æ“‡ç§‘ç³»</option>';
      deptData[selectedEdu].forEach(d => {
        const option = document.createElement('option');
        option.value = d;
        option.textContent = d;
        dept.appendChild(option);
      });
      updateFullClass();
    }

    // æ›´æ–°å®Œæ•´ç­ç´šæ–‡å­—
    function updateFullClass() {
      const eduVal = edu.value;
      const deptVal = dept.value;
      const gradeVal = grade.value;
      const classVal = classSel.value;
      if (eduVal && deptVal && gradeVal && classVal) {
        fullClass.value = `${eduVal} ${deptVal} ${gradeVal}å¹´ç´š${classVal}ç­`;
      } else {
        fullClass.value = '';
      }
    }

    edu.addEventListener('change', () => {
      updateDepartments();
      updateFullClass();
    });
    dept.addEventListener('change', updateFullClass);
    grade.addEventListener('change', updateFullClass);
    classSel.addEventListener('change', updateFullClass);

    // è¨ˆç®—ç¸½é‡‘é¡
    function calculateTotal() {
      const numPeople = Number(people.value);
      if (numPeople && numPeople > 0) {
        return numPeople * 200;
      }
      return 0;
    }

    people.addEventListener('input', () => {
      total.value = calculateTotal();
    });

    // é è¦½æŒ‰éˆ•äº‹ä»¶
    document.getElementById('btnPreview').addEventListener('click', () => {
      // åŸºæœ¬æ¬„ä½é©—è­‰
      if (!fullClass.value) return alert('è«‹å®Œæˆå®Œæ•´ç­ç´šé¸æ“‡');
      if (!sid.value.trim()) return alert('è«‹è¼¸å…¥å­¸è™Ÿ');
      if (!nameInput.value.trim()) return alert('è«‹è¼¸å…¥å§“å');
      if (!/^09\d{8}$/.test(phone.value)) return alert('è«‹è¼¸å…¥æ­£ç¢ºçš„æ‰‹æ©Ÿè™Ÿç¢¼(09é–‹é ­)');
      if (!email.value.trim() || !email.value.includes('@')) return alert('è«‹è¼¸å…¥æ­£ç¢ºçš„é›»å­éƒµä»¶');
      if (!people.value || people.value <= 0) return alert('è«‹è¼¸å…¥æ­£ç¢ºçš„æ‹æ”äººæ•¸');
      if (gown.value < 0) return alert('å­¸å£«æœä»¶æ•¸ä¸å¯ç‚ºè² æ•¸');
      if (!date.value) return alert('è«‹é¸æ“‡å¡«å¯«æ—¥æœŸ');

      total.value = calculateTotal();

      // å¡«å…¥é è¦½è¡¨æ ¼
      previewTableBody.innerHTML = `
        <tr><th>å®Œæ•´ç­ç´š</th><td>${fullClass.value}</td></tr>
        <tr><th>å­¸è™Ÿ</th><td>${sid.value}</td></tr>
        <tr><th>å§“å</th><td>${nameInput.value}</td></tr>
        <tr><th>é›»è©±</th><td>${phone.value}</td></tr>
        <tr><th>Email</th><td>${email.value}</td></tr>
        <tr><th>æ‹æ”äººæ•¸</th><td>${people.value}</td></tr>
        <tr><th>å­¸å£«æœä»¶æ•¸</th><td>${gown.value}</td></tr>
        <tr><th>å¡«å¯«æ—¥æœŸ</th><td>${date.value}</td></tr>
        <tr><th>ç¸½é‡‘é¡</th><td>${total.value} å…ƒ</td></tr>
      `;
      preview.classList.remove('hidden');
    });

    // è¿”å›ä¿®æ”¹
    document.getElementById('btnBack').addEventListener('click', () => {
      preview.classList.add('hidden');
    });

    // ç¢ºèªé€å‡ºï¼ˆæ­¤è™•æš«æ™‚ç”¨ alert ç¤ºæ„ï¼Œæœªæ¥å¾Œç«¯ï¼‰
    document.getElementById('btnSubmit').addEventListener('click', () => {
      alert('å ±åè³‡æ–™å·²é€å‡ºï¼Œæ„Ÿè¬æ‚¨çš„å¡«å¯«ï¼');
      // è¡¨å–®é€å‡ºå¾Œæ¸…ç©ºè¡¨å–®
      preview.classList.add('hidden');
      document.querySelectorAll('#formPage input, #formPage select').forEach(input => {
        if(input.type === 'date') {
          input.value = '';
        } else if (input.hasAttribute('readonly')) {
          input.value = '';
        } else {
          input.value = '';
        }
      });
      total.value = '';
      showPage('homePage');
    });

    // é¦–é æŒ‰éˆ•äº‹ä»¶
    document.getElementById('btnToForm').addEventListener('click', () => showPage('formPage'));
    document.getElementById('btnToQuery').addEventListener('click', () => showPage('queryPage'));
    document.getElementById('btnToLogin').addEventListener('click', () => showPage('loginPage'));

    // è¿”å›é¦–é æŒ‰éˆ•äº‹ä»¶
    document.getElementById('btnFormBack').addEventListener('click', () => showPage('homePage'));
    document.getElementById('btnQueryBack').addEventListener('click', () => showPage('homePage'));
    document.getElementById('btnLoginBack').addEventListener('click', () => showPage('homePage'));

    // ç™»å…¥æŒ‰éˆ•ç¤ºæ„
    document.getElementById('btnLoginSubmit').addEventListener('click', () => {
      const account = document.getElementById('loginAccount').value.trim();
      const password = document.getElementById('loginPassword').value;
      if (!account || !password) {
        alert('è«‹è¼¸å…¥å¸³è™Ÿèˆ‡å¯†ç¢¼');
        return;
      }
      alert('ç™»å…¥åŠŸèƒ½å°šæœªå¯¦ä½œ');
    });
  </script>
</body>
</html>
